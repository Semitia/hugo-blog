






<!doctype html>
<html
  lang="zh-Hans"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="true"
><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#FFFFFF" />
  
  <title>Docker Note &middot; Semitia-Blog</title>
    <meta name="title" content="Docker Note &middot; Semitia-Blog" />
  
  
  
  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js"
    integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="
  ></script>
  
  
  
  
  
  
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.3e97d1a40161cd59b059d44499fc9d982d868881f1450889ca07e646a9fb3a8e.css"
    integrity="sha256-PpfRpAFhzVmwWdREmfydmC2GiIHxRQiJygfmRqn7Oo4="
  />
  
    
    
    
  
  
    
    
    
  
  
    
    
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.e2f23ac92b690a4e99ab2dffef9aa96a95f7ec39636fb9fa7eeb70d55ba347ae.js"
      integrity="sha256-4vI6yStpCk6Zqy3/75qpapX37Dljb7n6futw1VujR64="
      data-copy="复制"
      data-copied="已复制"
    ></script>
  
  
  <meta
    name="description"
    content="
      Practical usage of Docker.
    "
  />
  
  
  
  <link rel="canonical" href="http://localhost:1313/posts/tools/docker-note/" />
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:url" content="http://localhost:1313/posts/tools/docker-note/">
  <meta property="og:site_name" content="Semitia-Blog">
  <meta property="og:title" content="Docker Note">
  <meta property="og:description" content="Practical usage of Docker.">
  <meta property="og:locale" content="zh_Hans">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-21T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-01-21T00:00:00+00:00">
    <meta property="article:tag" content="Docker">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Docker Note">
  <meta name="twitter:description" content="Practical usage of Docker.">

  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Docker Note",
    "headline": "Docker Note",
    "description": "Practical usage of Docker.",
    "abstract": "Practical usage of Docker.",
    "inLanguage": "zh-Hans",
    "url" : "http:\/\/localhost:1313\/posts\/tools\/docker-note\/",
    "author" : {
      "@type": "Person",
      "name": "Semitia"
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-01-21T00:00:00\u002b00:00",
    "datePublished": "2025-01-21T00:00:00\u002b00:00",
    
    "dateModified": "2025-01-21T00:00:00\u002b00:00",
    
    "keywords": ["Docker"],
    
    "mainEntityOfPage": "true",
    "wordCount": "926"
  }
  </script>
    
    <script type="application/ld+json">
    {
   "@context": "https://schema.org",
   "@type": "BreadcrumbList",
   "itemListElement": [
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/",
       "name": "Profile",
       "position": 1
     },
     {
       "@type": "ListItem",
       "item": "http://localhost:1313/posts/",
       "name": "Posts",
       "position": 2
     },
     {
       "@type": "ListItem",
       "name": "Docker Note",
       "position": 3
     }
   ]
 }
  </script>

  
  <meta name="author" content="Semitia" />
  
    
      <link href="https://twitter.com/" rel="me" />
    
      <link href="https://youtube.com/" rel="me" />
    
      <link href="https://github.com/" rel="me" />
    
      <link href="https://scholar.google.com/" rel="me" />
    
      <link href="mailto:Alexavier-L@outlook.com" rel="me" />
    
  
  
  






  
  

  
  
</head>
<body
    class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content"
        ><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span
        >跳到主要内容</a
      >
    </div>
    
    
      <header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden">
  <nav class="flex items-start justify-between sm:items-center">
    
    <div class="flex flex-row items-center">
      
  <a
    class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
    rel="me"
    href="/"
    >Semitia-Blog</a
  >

    </div>
    
    
      <ul class="flex list-none flex-col text-end sm:flex-row">
        
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/posts/"
                  title="Posts"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >posts</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                <a
                  href="/projects/"
                  title="projects"
                  
                  ><span
                      class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                      >projects</span
                    >
                  </a
                >
              
            </li>
          
            
            <li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0.5">
              
                
                
                  <button
                    id="search-button-1"
                    title="搜索 (/)"
                  >
                    
                      <span
                        class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"
                      ><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></span><span
                        class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"
                        ></span
                      >
                    
                  </button>
                
              
            </li>
          
            
              
          
        
      </ul>
    
  </nav>
</header>

    
    <div class="relative flex grow flex-col">
      <main id="main-content" class="grow">
        
  <article>
    <header class="max-w-prose">
      
        <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="hidden inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="/"
      >Profile</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class=" inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="/posts/"
      >Posts</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="hidden inline">
    <a
      class="dark:underline-neutral-600 decoration-neutral-300 hover:underline"
      href="/posts/tools/docker-note/"
      >Docker Note</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


      
      <h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Docker Note
      </h1>
      
        <div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
          





  
  



  

  
  
    
  

  

  

  
    
  

  
    
  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2025-01-21 00:00:00 &#43;0000 UTC">2025年1月21日</time><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">5 分钟</span><span class="px-2 text-primary-500">&middot;</span>


  
  

<span class="mb-[2px]">
  <a
    href="https://github.com/jpanther/congo/tree/dev/exampleSite/content/posts/Tools/docker%20note/index.zh-Hans.md"
    class="text-lg hover:text-primary-500"
    rel="noopener noreferrer"
    target="_blank"
    title="编辑内容"
    ><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M490.3 40.4C512.2 62.27 512.2 97.73 490.3 119.6L460.3 149.7L362.3 51.72L392.4 21.66C414.3-.2135 449.7-.2135 471.6 21.66L490.3 40.4zM172.4 241.7L339.7 74.34L437.7 172.3L270.3 339.6C264.2 345.8 256.7 350.4 248.4 353.2L159.6 382.8C150.1 385.6 141.5 383.4 135 376.1C128.6 370.5 126.4 361 129.2 352.4L158.8 263.6C161.6 255.3 166.2 247.8 172.4 241.7V241.7zM192 63.1C209.7 63.1 224 78.33 224 95.1C224 113.7 209.7 127.1 192 127.1H96C78.33 127.1 64 142.3 64 159.1V416C64 433.7 78.33 448 96 448H352C369.7 448 384 433.7 384 416V319.1C384 302.3 398.3 287.1 416 287.1C433.7 287.1 448 302.3 448 319.1V416C448 469 405 512 352 512H96C42.98 512 0 469 0 416V159.1C0 106.1 42.98 63.1 96 63.1H192z"/></svg>
</span></a
  >
</span>
    

    
    
  </div>

  
  


        </div>
      
      
    </header>
    <section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row">
      
        <div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8">
          <div class="toc pe-5 lg:sticky lg:top-10 print:hidden">
            <details open class="-ms-5 mt-0 overflow-hidden rounded-lg ps-5">
  <summary
    class="block cursor-pointer bg-neutral-100 py-1 ps-5 text-lg font-semibold text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden"
  >
    目录
  </summary>
  <div class="border-s border-dotted border-neutral-300 py-2 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#安装与配置">安装与配置</a>
      <ul>
        <li><a href="#1-安装-docker">1. 安装 Docker</a></li>
        <li><a href="#配置-docker-使用代理">配置 Docker 使用代理</a></li>
        <li><a href="#添加用户组">添加用户组</a></li>
      </ul>
    </li>
    <li><a href="#常用操作">常用操作</a>
      <ul>
        <li><a href="#拉取镜像">拉取镜像</a></li>
        <li><a href="#查看本地镜像">查看本地镜像</a></li>
        <li><a href="#查看运行中的容器">查看运行中的容器</a></li>
        <li><a href="#查看所有容器包括已停止的容器">查看所有容器（包括已停止的容器）</a></li>
        <li><a href="#启动容器">启动容器</a></li>
        <li><a href="#启动新的shell会话">启动新的shell会话</a></li>
        <li><a href="#关闭容器">关闭容器</a></li>
        <li><a href="#保存容器为镜像">保存容器为镜像</a></li>
        <li><a href="#查看容器的空间占用">查看容器的空间占用</a></li>
        <li><a href="#本地保存和加载-docker-镜像">本地保存和加载 Docker 镜像</a></li>
        <li><a href="#删除镜像和容器">删除镜像和容器</a></li>
        <li><a href="#文件操作">文件操作</a></li>
      </ul>
    </li>
    <li><a href="#gui配置">GUI配置</a>
      <ul>
        <li><a href="#主机">主机</a></li>
        <li><a href="#容器">容器</a></li>
      </ul>
    </li>
    <li><a href="#dockerfile">Dockerfile</a>
      <ul>
        <li><a href="#文件示例">文件示例</a></li>
        <li><a href="#使用-docker-构建镜像">使用 Docker 构建镜像</a></li>
      </ul>
    </li>
    <li><a href="#docker-compose">Docker Compose</a>
      <ul>
        <li><a href="#安装">安装</a></li>
        <li><a href="#使用方法">使用方法</a></li>
        <li><a href="#docker-compose-plugin">docker compose plugin</a></li>
      </ul>
    </li>
    <li><a href="#容器内使用显卡">容器内使用显卡</a>
      <ul>
        <li></li>
        <li><a href="#拉取-cuda-118-镜像">拉取 CUDA 11.8 镜像</a></li>
        <li><a href="#运行容器">运行容器</a></li>
      </ul>
    </li>
    <li><a href="#其他问题">其他问题</a>
      <ul>
        <li><a href="#共享卷导致的git权限问题可能">共享卷导致的git权限问题（可能）</a></li>
        <li><a href="#容器配置主机代理">容器配置主机代理</a></li>
        <li><a href="#vscode开发">Vscode开发</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>

          </div>
        </div>
      
      <div class="min-h-0 min-w-0 max-w-prose grow">
        <p>






  
  
<figure><img src="/img/posts/Tools/docker%20note/IMG-20250121235045541.png" alt="IMG-20250121235045541.png" class="mx-auto my-0 rounded-md" />
</figure>
</p>
<h2 id="安装与配置" class="relative group">安装与配置 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%ae%89%e8%a3%85%e4%b8%8e%e9%85%8d%e7%bd%ae" aria-label="锚点">#</a></span></h2><hr>
<h3 id="1-安装-docker" class="relative group">1. 安装 Docker <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#1-%e5%ae%89%e8%a3%85-docker" aria-label="锚点">#</a></span></h3><h4 id="步骤-1更新系统包" class="relative group">步骤 1：更新系统包 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%ad%a5%e9%aa%a4-1%e6%9b%b4%e6%96%b0%e7%b3%bb%e7%bb%9f%e5%8c%85" aria-label="锚点">#</a></span></h4><p>确保系统的包是最新的：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt upgrade -y
</span></span></code></pre></div><h4 id="步骤-2安装-docker" class="relative group">步骤 2：安装 Docker <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%ad%a5%e9%aa%a4-2%e5%ae%89%e8%a3%85-docker" aria-label="锚点">#</a></span></h4><p>运行以下命令以安装 Docker：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt install docker.io -y
</span></span></code></pre></div><h4 id="步骤-3可选启动和设置-docker-服务" class="relative group">步骤 3（可选）：启动和设置 Docker 服务 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%ad%a5%e9%aa%a4-3%e5%8f%af%e9%80%89%e5%90%af%e5%8a%a8%e5%92%8c%e8%ae%be%e7%bd%ae-docker-%e6%9c%8d%e5%8a%a1" aria-label="锚点">#</a></span></h4><p>启动 Docker 并将其设置为开机自启动：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo systemctl start docker
</span></span><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> docker
</span></span></code></pre></div><h4 id="步骤-4验证-docker-是否安装成功" class="relative group">步骤 4：验证 Docker 是否安装成功 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%ad%a5%e9%aa%a4-4%e9%aa%8c%e8%af%81-docker-%e6%98%af%e5%90%a6%e5%ae%89%e8%a3%85%e6%88%90%e5%8a%9f" aria-label="锚点">#</a></span></h4><p>运行以下命令检查 Docker 版本：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker --version
</span></span></code></pre></div><p>输出类似于 <code>Docker version xx.xx.xx</code> 表示安装成功。</p>
<h3 id="配置-docker-使用代理" class="relative group">配置 Docker 使用代理 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e9%85%8d%e7%bd%ae-docker-%e4%bd%bf%e7%94%a8%e4%bb%a3%e7%90%86" aria-label="锚点">#</a></span></h3><p>创建配置文件并添加代理设置：</p>
<ol>
<li>
<p>创建或编辑 Docker 服务的配置文件：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo mkdir -p /etc/systemd/system/docker.service.d 
</span></span><span class="line"><span class="cl">sudo gedit /etc/systemd/system/docker.service.d/http-proxy.conf
</span></span></code></pre></div></li>
<li>
<p>在 <code>http-proxy.conf</code> 文件中添加以下内容：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>Service<span class="o">]</span> 
</span></span><span class="line"><span class="cl"><span class="nv">Environment</span><span class="o">=</span><span class="s2">&#34;HTTP_PROXY=http://127.0.0.1:7890/&#34;</span> 
</span></span><span class="line"><span class="cl"><span class="nv">Environment</span><span class="o">=</span><span class="s2">&#34;HTTPS_PROXY=http://127.0.0.1:7890/&#34;</span> 
</span></span><span class="line"><span class="cl"><span class="nv">Environment</span><span class="o">=</span><span class="s2">&#34;NO_PROXY=localhost,127.0.0.1&#34;</span>
</span></span></code></pre></div></li>
<li>
<p>重新加载系统守护进程配置并重启 Docker 服务：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo systemctl daemon-reload 
</span></span><span class="line"><span class="cl">sudo systemctl restart docker
</span></span></code></pre></div></li>
</ol>
<h3 id="添加用户组" class="relative group">添加用户组 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%b7%bb%e5%8a%a0%e7%94%a8%e6%88%b7%e7%bb%84" aria-label="锚点">#</a></span></h3><p>避免每次使用docker都需要sudo</p>
<p><a href="https://docs.docker.com/engine/install/linux-postinstall/" target="_blank" rel="noreferrer">Post-installation steps | Docker Docs</a></p>
<p>用户名似乎需要小写</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">alexavier@alexavier:~$ sudo usermod -aG docker Alexavier
</span></span><span class="line"><span class="cl">usermod：用户“Alexavier”不存在
</span></span><span class="line"><span class="cl">alexavier@alexavier:~$ sudo usermod -aG docker alexavier
</span></span></code></pre></div><p>配置完似乎还需要重启/重新登录一下vscode插件才能用</p>
<h2 id="常用操作" class="relative group">常用操作 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%b8%b8%e7%94%a8%e6%93%8d%e4%bd%9c" aria-label="锚点">#</a></span></h2><h3 id="拉取镜像" class="relative group">拉取镜像 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%8b%89%e5%8f%96%e9%95%9c%e5%83%8f" aria-label="锚点">#</a></span></h3><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker pull osrf/ros:noetic-desktop-full
</span></span></code></pre></div><h3 id="查看本地镜像" class="relative group">查看本地镜像 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%9f%a5%e7%9c%8b%e6%9c%ac%e5%9c%b0%e9%95%9c%e5%83%8f" aria-label="锚点">#</a></span></h3><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker images
</span></span></code></pre></div><h3 id="查看运行中的容器" class="relative group">查看运行中的容器 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%9f%a5%e7%9c%8b%e8%bf%90%e8%a1%8c%e4%b8%ad%e7%9a%84%e5%ae%b9%e5%99%a8" aria-label="锚点">#</a></span></h3><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker ps
</span></span></code></pre></div><h3 id="查看所有容器包括已停止的容器" class="relative group">查看所有容器（包括已停止的容器） <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%9f%a5%e7%9c%8b%e6%89%80%e6%9c%89%e5%ae%b9%e5%99%a8%e5%8c%85%e6%8b%ac%e5%b7%b2%e5%81%9c%e6%ad%a2%e7%9a%84%e5%ae%b9%e5%99%a8" aria-label="锚点">#</a></span></h3><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker ps -a
</span></span></code></pre></div><h3 id="启动容器" class="relative group">启动容器 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%90%af%e5%8a%a8%e5%ae%b9%e5%99%a8" aria-label="锚点">#</a></span></h3><p>如果多个容器共用同一个镜像，镜像的只读部分会被共享，<strong>不会重复占用空间</strong>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run -it my_noetic:7_26 /bin/bash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker run -it --network host my_noetic:7_26 /bin/bash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker run -it --network host -v ~/SumResearch_2024/Repo/Host/ROS1_ws:/root/ROS1_ws my_noetic:latest /bin/bash
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker run -it --network host -v ~/SumResearch_2024/Repo/Host/ROS1_ws:/root/ROS1_ws -v ~/SumResearch_2024/Repo/RDKx5:/root/RDKx5 arm_noetic:latest
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker run -it --network host -v ~/SumResearch_2024/Repo/Host/ROS1_ws:/root/ROS1_ws -v ~/SumResearch_2024/Repo/RDKx5:/root/RDKx5 --privileged --device /dev/ttyUSB0 arm_noetic:latest
</span></span></code></pre></div><h3 id="启动新的shell会话" class="relative group">启动新的shell会话 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%90%af%e5%8a%a8%e6%96%b0%e7%9a%84shell%e4%bc%9a%e8%af%9d" aria-label="锚点">#</a></span></h3><p>找到运行中的容器ID或者容器名，假如为my_noetic_container</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker <span class="nb">exec</span> -it my_noetic_container /bin/bash
</span></span></code></pre></div><h3 id="关闭容器" class="relative group">关闭容器 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%85%b3%e9%97%ad%e5%ae%b9%e5%99%a8" aria-label="锚点">#</a></span></h3><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker <span class="nb">kill</span> &lt;container_name_or_id&gt;
</span></span></code></pre></div><h3 id="保存容器为镜像" class="relative group">保存容器为镜像 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e4%bf%9d%e5%ad%98%e5%ae%b9%e5%99%a8%e4%b8%ba%e9%95%9c%e5%83%8f" aria-label="锚点">#</a></span></h3><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker commit youthful_khayyam airbot_img:latest
</span></span></code></pre></div><h3 id="查看容器的空间占用" class="relative group">查看容器的空间占用 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e7%9a%84%e7%a9%ba%e9%97%b4%e5%8d%a0%e7%94%a8" aria-label="锚点">#</a></span></h3><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker system df
</span></span></code></pre></div><h3 id="本地保存和加载-docker-镜像" class="relative group">本地保存和加载 Docker 镜像 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%9c%ac%e5%9c%b0%e4%bf%9d%e5%ad%98%e5%92%8c%e5%8a%a0%e8%bd%bd-docker-%e9%95%9c%e5%83%8f" aria-label="锚点">#</a></span></h3><p>将 Docker 镜像保存为一个文件，然后在其他地方加载这个文件。</p>
<h5 id="保存镜像" class="relative group">保存镜像 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e4%bf%9d%e5%ad%98%e9%95%9c%e5%83%8f" aria-label="锚点">#</a></span></h5><p>使用 <code>docker save</code> 命令将镜像保存为 tar 文件：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker save -o my-ubuntu-image.tar my-ubuntu-image
</span></span></code></pre></div><h5 id="加载镜像" class="relative group">加载镜像 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%8a%a0%e8%bd%bd%e9%95%9c%e5%83%8f" aria-label="锚点">#</a></span></h5><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker load -i my-ubuntu-image.tar
</span></span></code></pre></div><h3 id="删除镜像和容器" class="relative group">删除镜像和容器 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%88%a0%e9%99%a4%e9%95%9c%e5%83%8f%e5%92%8c%e5%ae%b9%e5%99%a8" aria-label="锚点">#</a></span></h3><ul>
<li>
<p><strong>删除容器</strong>：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker rm &lt;container_id_or_name&gt;
</span></span></code></pre></div></li>
<li>
<p><strong>删除镜像</strong>：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker rmi &lt;image_id_or_repository:tag&gt;
</span></span></code></pre></div></li>
</ul>
<h3 id="文件操作" class="relative group">文件操作 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%96%87%e4%bb%b6%e6%93%8d%e4%bd%9c" aria-label="锚点">#</a></span></h3><h4 id="复制到容器" class="relative group">复制到容器 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%a4%8d%e5%88%b6%e5%88%b0%e5%ae%b9%e5%99%a8" aria-label="锚点">#</a></span></h4><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker cp ~/SumResearch_2024/Repo/Host/ROS1_ws youthful_khayyam:/home/
</span></span></code></pre></div><h2 id="gui配置" class="relative group">GUI配置 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#gui%e9%85%8d%e7%bd%ae" aria-label="锚点">#</a></span></h2><h3 id="主机" class="relative group">主机 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e4%b8%bb%e6%9c%ba" aria-label="锚点">#</a></span></h3><p>安装x11</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt install xserver-xorg xauth
</span></span></code></pre></div><p>验证功能</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">xeyes
</span></span></code></pre></div><p>授予权限</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">xhost +local:
</span></span></code></pre></div><h3 id="容器" class="relative group">容器 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%ae%b9%e5%99%a8" aria-label="锚点">#</a></span></h3><p>建议使用compose打开容器，具体内容可参考后面的</p>
<p>安装x11</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">apt update
</span></span><span class="line"><span class="cl">apt install -y x11-apps
</span></span></code></pre></div><p>测试</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">xeyes
</span></span></code></pre></div><h2 id="dockerfile" class="relative group">Dockerfile <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#dockerfile" aria-label="锚点">#</a></span></h2><h3 id="文件示例" class="relative group">文件示例 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%96%87%e4%bb%b6%e7%a4%ba%e4%be%8b" aria-label="锚点">#</a></span></h3><p>Dockerfile 是一个文本文件，包含了一系列指令，用于定义如何构建 Docker 镜像。假设你想要创建一个包含基本 Ubuntu 系统的 Docker 镜像，可以创建一个简单的 Dockerfile：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Dockerfile" data-lang="Dockerfile"><span class="line"><span class="cl"><span class="c"># 使用官方的 Ubuntu 镜像作为基础镜像</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> ubuntu:20.04</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 维护者信息</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">LABEL</span> <span class="nv">maintainer</span><span class="o">=</span><span class="s2">&#34;your_email@example.com&#34;</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 更新包列表并安装一些基础工具</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    curl <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    wget <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    vim <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    git <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> apt-get clean<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 设置工作目录</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">WORKDIR</span><span class="s"> /root</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 复制你的系统配置文件（可选）</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># COPY my_config_file /root/my_config_file</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 安装其他软件或进行其他配置（根据需要）</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># RUN ...</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># 默认命令</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;bash&#34;</span><span class="p">]</span><span class="err">
</span></span></span></code></pre></div><p>你可以根据自己的需求在 Dockerfile 中添加更多指令，例如安装其他软件、复制文件等。</p>
<h3 id="使用-docker-构建镜像" class="relative group">使用 Docker 构建镜像 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e4%bd%bf%e7%94%a8-docker-%e6%9e%84%e5%bb%ba%e9%95%9c%e5%83%8f" aria-label="锚点">#</a></span></h3><p>在 Dockerfile 所在的目录，打开终端并运行以下命令构建 Docker 镜像：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker build -t my-ubuntu-image .
</span></span></code></pre></div><p>其中 <code>my-ubuntu-image</code> 是你给镜像指定的名字，<code>.</code> 表示 Dockerfile 在当前目录。</p>
<p> </p>
<h2 id="docker-compose" class="relative group">Docker Compose <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#docker-compose" aria-label="锚点">#</a></span></h2><p>Docker Compose 使用一个 YAML 文件来定义和管理多个容器，从而简化命令行操作。</p>
<h3 id="安装" class="relative group">安装 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%ae%89%e8%a3%85" aria-label="锚点">#</a></span></h3><p><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noreferrer">Docker Compose 的官方文档</a></p>
<p><a href="https://www.runoob.com/docker/docker-compose.html" target="_blank" rel="noreferrer">Docker Compose | 菜鸟教程</a></p>
<h3 id="使用方法" class="relative group">使用方法 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e4%bd%bf%e7%94%a8%e6%96%b9%e6%b3%95" aria-label="锚点">#</a></span></h3><p>在项目根目录下创建一个 <code>docker-compose.yml</code> 文件，并在其中添加以下内容：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3.8&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">arm_noetic</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">arm_noetic:latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">arm_noetic_container</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">network_mode</span><span class="p">:</span><span class="w"> </span><span class="l">host</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">~/SumResearch_2024/Repo/Host/ROS1_ws:/root/ROS1_ws</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">~/SumResearch_2024/Repo/RDKx5:/root/RDKx5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">privileged</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">devices</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s2">&#34;/dev/ttyUSB0:/dev/ttyUSB0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">stdin_open</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">tty</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span></code></pre></div><p>在这个文件中：</p>
<ul>
<li><code>version</code> 指定了 Docker Compose 文件的版本。</li>
<li><code>services</code> 部分定义了一个服务（即容器），这里命名为 <code>arm_noetic</code>。</li>
<li><code>image</code> 指定了要使用的 Docker 镜像。</li>
<li><code>container_name</code> 为容器指定了一个名字。</li>
<li><code>network_mode</code> 设置为 <code>host</code>，与 <code>--network host</code> 参数相同。</li>
<li><code>volumes</code> 定义了需要挂载的卷。</li>
<li><code>privileged</code> 设置为 <code>true</code>，使容器具有特权。</li>
<li><code>devices</code> 部分指定了需要共享的设备。</li>
<li><code>stdin_open</code> 和 <code>tty</code> 设置为 <code>true</code>，以启用交互模式。</li>
</ul>
<p>使用以下命令以后台模式启动容器：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">docker-compose up -d
</span></span></code></pre></div><p><strong>注意</strong>，这个方法会删除已有的同名容器，并用镜像<strong>重新创建</strong>容器。如果只是启动<strong>已经存在但处于停止状态</strong>的容器，使用以下命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker compose start
</span></span></code></pre></div><h3 id="docker-compose-plugin" class="relative group">docker compose plugin <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#docker-compose-plugin" aria-label="锚点">#</a></span></h3><p>在使用24.04的时候，<code>docker-compose</code> 用不了，因为 <code>docker-compose</code> 1.x 版本依赖 <code>distutils</code>，而 <code>distutils</code> 在Python 3.12 中被移除。新版 <code>docker-compose</code> 已转为使用 Go 实现 (<code>docker-compose-plugin</code>)，不再依赖 Python。
<strong>安装方法</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt remove docker-compose
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加docker官方源</span>
</span></span><span class="line"><span class="cl">sudo apt update sudo apt install -y ca-certificates curl gnupg sudo install -m <span class="m">0755</span> -d /etc/apt/keyrings curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="p">|</span> sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg sudo chmod a+r /etc/apt/keyrings/docker.gpg <span class="nb">echo</span> <span class="s2">&#34;deb [arch=</span><span class="k">$(</span>dpkg --print-architecture<span class="k">)</span><span class="s2"> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> stable&#34;</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null sudo apt update
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 安装 &amp; 验证</span>
</span></span><span class="line"><span class="cl">sudo apt install docker-compose-plugin
</span></span><span class="line"><span class="cl">docker compose version
</span></span></code></pre></div><p>相应的，compose配置似乎也要稍微修改</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3.8&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nt">graspnet</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nvidia/cuda:12.1.0-devel-ubuntu22.04</span><span class="w"> </span><span class="c"># 使用你下载的镜像</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">graspnet-container</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">network_mode</span><span class="p">:</span><span class="w"> </span><span class="l">host</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span>- <span class="l">NVIDIA_VISIBLE_DEVICES=all</span><span class="w"> </span><span class="c"># 显示所有 GPU（可指定 GPU）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span>- <span class="l">NVIDIA_DRIVER_CAPABILITIES=all</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span>- <span class="l">DISPLAY=${DISPLAY}</span><span class="w"> </span><span class="c"># 支持可视化</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span>- <span class="l">QT_X11_NO_MITSHM=1</span><span class="w"> </span><span class="c"># 防止 Qt 报错</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span>- <span class="l">HTTP_PROXY=http://127.0.0.1:7890</span><span class="w"> </span><span class="c"># Clash 代理端口</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span>- <span class="l">HTTPS_PROXY=http://127.0.0.1:7890</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span>- <span class="l">~/graspnet:/workspace</span><span class="w"> </span><span class="c"># 挂载本地 ~/graspnet 到容器内 /workspace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span>- <span class="l">/media/user/disk/dataset/graspnet:/workspace/dataset</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span>- <span class="l">/tmp/.X11-unix:/tmp/.X11-unix</span><span class="w"> </span><span class="c"># 共享 X11 的 Unix socket，支持 GUI</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">privileged</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">working_dir</span><span class="p">:</span><span class="w"> </span><span class="l">/workspace</span><span class="w"> </span><span class="c"># 容器内的默认工作目录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">stdin_open</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># 支持交互式会话</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">tty</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c"># 启用终端</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nt">deploy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nt">resources</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">				</span><span class="nt">reservations</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">					</span><span class="nt">devices</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">						</span>- <span class="nt">capabilities</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">gpu]</span><span class="w">
</span></span></span></code></pre></div><h2 id="容器内使用显卡" class="relative group">容器内使用显卡 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%ae%b9%e5%99%a8%e5%86%85%e4%bd%bf%e7%94%a8%e6%98%be%e5%8d%a1" aria-label="锚点">#</a></span></h2><p>为了支持 GPU，需要安装 NVIDIA Container Toolkit。</p>
<h4 id="设置-nvidia-docker-存储库" class="relative group">设置 NVIDIA Docker 存储库 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e8%ae%be%e7%bd%ae-nvidia-docker-%e5%ad%98%e5%82%a8%e5%ba%93" aria-label="锚点">#</a></span></h4><p>添加 NVIDIA 的 GPG 密钥和存储库：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">distribution</span><span class="o">=</span><span class="k">$(</span>. /etc/os-release<span class="p">;</span><span class="nb">echo</span> <span class="nv">$ID$VERSION_ID</span><span class="k">)</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey <span class="p">|</span> sudo apt-key add - <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> curl -s -L https://nvidia.github.io/nvidia-docker/<span class="nv">$distribution</span>/nvidia-docker.list <span class="p">|</span> sudo tee /etc/apt/sources.list.d/nvidia-docker.list
</span></span></code></pre></div><h4 id="安装-nvidia-container-toolkit" class="relative group">安装 NVIDIA Container Toolkit <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%ae%89%e8%a3%85-nvidia-container-toolkit" aria-label="锚点">#</a></span></h4><p>更新包列表并安装：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt install -y nvidia-docker2
</span></span><span class="line"><span class="cl"><span class="c1"># 下载太慢也可以走代理</span>
</span></span><span class="line"><span class="cl">sudo apt -o Acquire::http::Proxy<span class="o">=</span><span class="s2">&#34;http://127.0.0.1:7890&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>         -o Acquire::https::Proxy<span class="o">=</span><span class="s2">&#34;http://127.0.0.1:7890&#34;</span> install -y nvidia-docker2
</span></span></code></pre></div><h4 id="重启-docker-服务" class="relative group">重启 Docker 服务 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e9%87%8d%e5%90%af-docker-%e6%9c%8d%e5%8a%a1" aria-label="锚点">#</a></span></h4><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo systemctl restart docker
</span></span></code></pre></div><h4 id="验证-nvidia-docker-是否可用" class="relative group">验证 NVIDIA Docker 是否可用 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e9%aa%8c%e8%af%81-nvidia-docker-%e6%98%af%e5%90%a6%e5%8f%af%e7%94%a8" aria-label="锚点">#</a></span></h4><p>运行以下命令检查 GPU 是否可以被 Docker 访问：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run --rm --gpus all nvidia/cuda:11.8-base nvidia-smi
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 监控GPU使用情况</span>
</span></span><span class="line"><span class="cl">sudo apt install gpustat
</span></span><span class="line"><span class="cl">gpustat --watch
</span></span></code></pre></div><p>如果显示GPU 信息，说明安装成功。</p>
<h4 id="ubuntu-2404版本" class="relative group">Ubuntu 24.04版本 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#ubuntu-2404%e7%89%88%e6%9c%ac" aria-label="锚点">#</a></span></h4><p>目前（2024.12.15）NVIDIA Container Toolkit 还不支持 ubuntu 24.04,不过也能下载，参考:</p>
<blockquote>
<p><a href="https://www.server-world.info/en/note?os=Ubuntu_24.04&amp;p=nvidia&amp;f=3" target="_blank" rel="noreferrer">https://www.server-world.info/en/note?os=Ubuntu_24.04&p=nvidia&f=3</a></p>
</blockquote>
<p>总结一下</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 更新依赖和系统</span>
</span></span><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt install -y curl apt-transport-https ca-certificates software-properties-common
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加 NVIDIA GPG 公钥</span>
</span></span><span class="line"><span class="cl">curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey <span class="p">|</span> sudo gpg --dearmor -o /usr/share/keyrings/nvidia-toolkit.gpg
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加 NVIDIA 容器工具包源</span>
</span></span><span class="line"><span class="cl">curl -fsSL https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list <span class="p">|</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>sudo tee /etc/apt/sources.list.d/nvidia-toolkit.list
</span></span><span class="line"><span class="cl">sudo sed -i -e <span class="s2">&#34;s/^deb/deb [signed-by=\/usr\/share\/keyrings\/nvidia-toolkit.gpg]/g&#34;</span> /etc/apt/sources.list.d/nvidia-toolkit.list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 更新包索引和安装工具包</span>
</span></span><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt install -y nvidia-container-toolkit
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 重启 Docker 并测试</span>
</span></span><span class="line"><span class="cl">sudo systemctl restart docker
</span></span><span class="line"><span class="cl">sudo docker run --rm --gpus all nvidia/cuda:12.3.0-runtime-ubuntu22.04 nvidia-smi
</span></span></code></pre></div><hr>
<h3 id="拉取-cuda-118-镜像" class="relative group">拉取 CUDA 11.8 镜像 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%8b%89%e5%8f%96-cuda-118-%e9%95%9c%e5%83%8f" aria-label="锚点">#</a></span></h3><p><a href="https://hub.docker.com/r/nvidia/cuda/tags" target="_blank" rel="noreferrer">https://hub.docker.com/r/nvidia/cuda/tags</a></p>
<p>选择适合的镜像并运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo docker pull nvidia/cuda:11.8.0-base-ubuntu22.04
</span></span></code></pre></div><hr>
<h3 id="运行容器" class="relative group">运行容器 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e8%bf%90%e8%a1%8c%e5%ae%b9%e5%99%a8" aria-label="锚点">#</a></span></h3><p>使用 CUDA 镜像启动容器并验证 CUDA 是否可用：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker run --rm --gpus all -it nvidia/cuda:11.8-base-ubuntu22.04 bash
</span></span></code></pre></div><p>或者用compose</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3.8&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">graspnet</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">pytorch/pytorch:2.2.0-cuda11.8-cudnn8-devel</span><span class="w"> </span><span class="c"># 使用你下载的镜像</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">graspnet-container</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">network_mode</span><span class="p">:</span><span class="w"> </span><span class="l">host</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">runtime</span><span class="p">:</span><span class="w"> </span><span class="l">nvidia</span><span class="w"> </span><span class="c"># 启用 GPU 支持（需安装 NVIDIA Container Toolkit）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">NVIDIA_VISIBLE_DEVICES=all</span><span class="w"> </span><span class="c"># 显示所有 GPU（可指定 GPU）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">NVIDIA_DRIVER_CAPABILITIES=all</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">DISPLAY=${DISPLAY}        </span><span class="w"> </span><span class="c"># 支持可视化</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">QT_X11_NO_MITSHM=1        </span><span class="w"> </span><span class="c"># 防止 Qt 报错</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">HTTP_PROXY=http://127.0.0.1:7890 </span><span class="w"> </span><span class="c"># Clash 代理端口</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">HTTPS_PROXY=http://127.0.0.1:7890</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">~/graspnet:/workspace     </span><span class="w"> </span><span class="c"># 挂载本地 ~/graspnet 到容器内 /workspace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/media/alexavier/8018420DD8B69548/dataset/graspnet:/workspace/dataset </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/tmp/.X11-unix:/tmp/.X11-unix</span><span class="w"> </span><span class="c"># 共享 X11 的 Unix socket，支持 GUI</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">privileged</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">working_dir</span><span class="p">:</span><span class="w"> </span><span class="l">/workspace       </span><span class="w"> </span><span class="c"># 容器内的默认工作目录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">stdin_open</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">               </span><span class="c"># 支持交互式会话</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">tty</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">                      </span><span class="c"># 启用终端</span><span class="w">
</span></span></span></code></pre></div><h4 id="验证环境" class="relative group"><strong>验证环境</strong>： <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e9%aa%8c%e8%af%81%e7%8e%af%e5%a2%83" aria-label="锚点">#</a></span></h4><p>在容器中运行以下命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nvidia-smi
</span></span></code></pre></div><p>由于nvcc是devel版本才有的工具，没法用<code>nvcc -V</code>，如果不需要开发cuda程序，只是运行程序时会用到可以只用base</p>
<hr>
<h2 id="其他问题" class="relative group">其他问题 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%85%b6%e4%bb%96%e9%97%ae%e9%a2%98" aria-label="锚点">#</a></span></h2><h3 id="共享卷导致的git权限问题可能" class="relative group">共享卷导致的git权限问题（可能） <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%85%b1%e4%ba%ab%e5%8d%b7%e5%af%bc%e8%87%b4%e7%9a%84git%e6%9d%83%e9%99%90%e9%97%ae%e9%a2%98%e5%8f%af%e8%83%bd" aria-label="锚点">#</a></span></h3><p>类似这样的</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">❯ git pull
</span></span><span class="line"><span class="cl">error: unable to create file RDKx5/hand/servo_limit.json: 权限不够
</span></span></code></pre></div><p>确保用户拥有整个 Git 仓库的文件和目录的所有权</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo chown -R <span class="nv">$USER</span>:<span class="nv">$USER</span> ~/SumResearch_2024/Repo
</span></span></code></pre></div><h3 id="容器配置主机代理" class="relative group">容器配置主机代理 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%ae%b9%e5%99%a8%e9%85%8d%e7%bd%ae%e4%b8%bb%e6%9c%ba%e4%bb%a3%e7%90%86" aria-label="锚点">#</a></span></h3><p>长期配置可在compose添加</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">HTTP_PROXY</span><span class="o">=</span><span class="s2">&#34;http://127.0.0.1:7890&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&#34;http://127.0.0.1:7890&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># test</span>
</span></span><span class="line"><span class="cl">curl -I https://www.google.com
</span></span></code></pre></div><h3 id="vscode开发" class="relative group">Vscode开发 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#vscode%e5%bc%80%e5%8f%91" aria-label="锚点">#</a></span></h3><h4 id="vscode-remote---containers-插件" class="relative group">VSCode Remote - Containers 插件 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#vscode-remote---containers-%e6%8f%92%e4%bb%b6" aria-label="锚点">#</a></span></h4><h4 id="修改共享目录权限" class="relative group">修改共享目录权限 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e4%bf%ae%e6%94%b9%e5%85%b1%e4%ba%ab%e7%9b%ae%e5%bd%95%e6%9d%83%e9%99%90" aria-label="锚点">#</a></span></h4><blockquote>
<p>无法写入文件&quot;/home/semitia/SumResearch_2024/Repo/Host/ROS1_ws/src/hand_control/src/hand_ctrl.py&quot;(NoPermissions (FileSystemError): Error: EACCES: permission denied, open &lsquo;/home/semitia/SumResearch_2024/Repo/Host/ROS1_ws/src/hand_control/src/hand_ctrl.py&rsquo;)</p>
</blockquote>
<p>在宿主机上修改挂载目录的权限，使其对所有用户都可写：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod -R <span class="m">777</span> ~/SumResearch_2024/Repo/Host/ROS1_ws
</span></span></code></pre></div>
      </div>
    </section>
    <footer class="max-w-prose pt-8 print:hidden">
      
  <div class="flex">
    
    
    
      
      
        
        








  
    <picture
      class="!mb-0 !mt-0 me-4 w-24 h-auto rounded-full"
      
    >
      
      
      
      
      <img
        width="467"
        height="467"
        class="!mb-0 !mt-0 me-4 w-24 h-auto rounded-full"
        alt="Semitia"
        loading="lazy" decoding="async"
        
          src="/img/Citlali-avator.jpg"
        
      />
    </picture>
  


      
    
    <div class="place-self-center">
      
        <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
          作者
        </div>
        <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
          Semitia
        </div>
      
      
        <div class="text-sm text-neutral-700 dark:text-neutral-400">机器人小白。</div>
      
      <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
          style="will-change:transform;"
          href="https://twitter.com/"
          target="_blank"
          aria-label="X-Twitter"
          rel="me noopener noreferrer"
          ><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
</span></a
        >
      
    
      
        <a
          class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
          style="will-change:transform;"
          href="https://youtube.com/"
          target="_blank"
          aria-label="Youtube"
          rel="me noopener noreferrer"
          ><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
</span></a
        >
      
    
      
        <a
          class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
          style="will-change:transform;"
          href="https://github.com/"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></a
        >
      
    
      
        <a
          class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
          style="will-change:transform;"
          href="https://scholar.google.com/"
          target="_blank"
          aria-label="Google-Scholar"
          rel="me noopener noreferrer"
          ><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path fill="currentColor" d="M390.9 298.5c0 0 0 .1 .1 .1c9.2 19.4 14.4 41.1 14.4 64C405.3 445.1 338.5 512 256 512s-149.3-66.9-149.3-149.3c0-22.9 5.2-44.6 14.4-64h0c1.7-3.6 3.6-7.2 5.6-10.7c4.4-7.6 9.4-14.7 15-21.3c27.4-32.6 68.5-53.3 114.4-53.3c33.6 0 64.6 11.1 89.6 29.9c9.1 6.9 17.4 14.7 24.8 23.5c5.6 6.6 10.6 13.8 15 21.3c2 3.4 3.8 7 5.5 10.5zm26.4-18.8c-30.1-58.4-91-98.4-161.3-98.4s-131.2 40-161.3 98.4L0 202.7 256 0 512 202.7l-94.7 77.1z"/></svg></span></a
        >
      
    
      
        <a
          class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400"
          style="will-change:transform;"
          href="mailto:Alexavier-L@outlook.com"
          target="_blank"
          aria-label="Email"
          rel="me noopener noreferrer"
          ><span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>
</span></a
        >
      
    
  </div>

</div>
    </div>
  </div>


      

      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="group flex" href="/posts/linux/linux-preference/">
              <span
                class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
                ><span class="ltr:inline rtl:hidden">&larr;</span
                ><span class="ltr:hidden rtl:inline">&rarr;</span></span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >linux preference</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2025-01-21 00:00:00 &#43;0000 UTC">2025年1月21日</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="group flex text-right" href="/posts/tools/blogs/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Blogs</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2025-01-21 00:00:00 &#43;0000 UTC">2025年1月21日</time>
                  
                </span>
              </span>
              <span
                class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[-2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"
                ><span class="ltr:inline rtl:hidden">&rarr;</span
                ><span class="ltr:hidden rtl:inline">&larr;</span></span
              >
            </a>
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

      </main>
      
        <div
          class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12"
          id="to-top"
          hidden="true"
        >
          <a
            href="#the-top"
            class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
            aria-label="回到顶部"
            title="回到顶部"
          >
            &uarr;
          </a>
        </div>
      <footer class="py-10 print:hidden">
  
  
  <div class="flex items-center justify-between">
    <div>
      
      
        <p class="text-sm text-neutral-500 dark:text-neutral-400">
            © 2024 Congo contributors
        </p>
      
      
      
        <p class="text-xs text-neutral-500 dark:text-neutral-400">
          
          
          由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
            href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href="https://github.com/jpanther/congo" target="_blank" rel="noopener noreferrer">Congo</a> 强力驱动
        </p>
      
    </div>
    <div class="flex flex-row items-center">
      
      
      
      
        <div
          class="me-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        >
          <button id="appearance-switcher-0" type="button" aria-label="appearance switcher">
            <div
              class="flex h-12 w-12 items-center justify-center dark:hidden"
              title="切换为深色模式"
            >
              <span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
            </div>
            <div
              class="hidden h-12 w-12 items-center justify-center dark:flex"
              title="切换为浅色模式"
            >
              <span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
            </div>
          </button>
        </div>
      
    </div>
  </div>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="http://localhost:1313/"
>
  <div
    id="search-modal"
    class="top-20 mx-auto flex min-h-0 w-full max-w-3xl flex-col rounded-md border border-neutral-200 bg-neutral shadow-lg dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex flex-none items-center justify-between px-2">
      <form class="flex min-w-0 flex-auto items-center">
        <div class="flex h-8 w-8 items-center justify-center text-neutral-400">
          <span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="mx-1 flex h-12 flex-auto appearance-none bg-transparent focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="搜索"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex h-8 w-8 items-center justify-center text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="关闭 (Esc)"
      >
        <span class="icon relative inline-block px-1 align-text-bottom"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto overflow-auto px-2">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
</html>
